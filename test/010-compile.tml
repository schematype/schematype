#!/usr/bin/env testml

*cmd.run-out.clean == *out

=== Test 1
--- cmd: stp --compile --print 001/test.stp
--- show-cache: true
--- out
{
  "SchemaType": {"spec": "0.1.0"},
  "from": {
    "name": "001/test.stp",
    "time": "1234567890123",
    "mark": "13955d6cb7cf352fa24839e5427490a778a92736fb447e23e069ddcff4944a05"
  },
  "show": ["!test"],
  "type": {
    "test": {
      "kind": "Map",
      "pair": [
        ["foo", "!Int-1", true],
        ["bar", "!Str-2", true],
        ["baz", "!Str-3"]
      ]
    },
    "Int-1": {"kind": "Int", "xtoy": ["10", "100"]},
    "Str-2": {"kind": "Str", "like": "x.*y"},
    "Str-3": {"kind": "Str", "enum": ["apple", "banana", "carrot"]}
  }
}

# XXX Hack until testml-bash can handle:
# =>
#   ...
test-86bad1d2527d6d57d60c072de1752e882f030794e3220366796774f1ac552110.stc
test-86bad1d2527d6d57d60c072de1752e882f030794e3220366796774f1ac552110.stx

--- files(@)
CACHE/foo.5c4e3a.stc
CACHE/foo.5c4e3a.stx
001/foo.stx

# vim: ft=testml sw=2:
