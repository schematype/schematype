#!/usr/bin/env testml


*stp.add-head.compile.clean == *stc


=== Test 1 - Export regex part
--- stp
r1 := /(: foo | bar )/
--- stc
"show": ["/r1"]
"like": {"r1": "(?:foo|bar)"}


=== Test 2 - Multiline regex
--- stp
r1 := /(:
  foo |
  bar
)/
--- ^stc


=== Test 2 - Anchored syntax - both
--- stp
r1 = / (: foo | bar) /
--- stc
"like": {"r1": "\\A(?:foo|bar)\\z"}


=== Test 3 - Anchored syntax - left
--- stp
r1 = / (: foo | bar)/
--- stc
"like": {"r1": "\\A(?:foo|bar)"}


=== Test 4 - Anchored syntax - right
--- stp
r1 = /(: foo | bar) /
--- stc
"like": {"r1": "(?:foo|bar)\\z"}


=== Test 5 - Interpolation
--- stp
t1 := Str /foo {bar}*/
bar = /[abc]/
--- stc
"show": ["!t1"]
"type": {"t1": {"kind": "Str", "like": "foo[abc]*"}}
"like": {"bar": "[abc]"}


# vim: set ft=testml sw=2:
